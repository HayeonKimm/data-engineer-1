



## 데이터 전처리 과정





### 버스 도착시간과 출발시간 분류에 대한 고려



<경우>

1. 0이 중복된 경우. 전 정거장 최초 0 = 도착시간, 마지막 0 = 출발시간으로 가정

1-1. 1이 중복된 경우.  전 정거장 최초 1 = 도착시간, 마지막 1 = 출발시간으로 가정

--------------------------


2. 도착표시 없이 운행 중 - 운행 중인 경우 =  섹션 바뀌었을 때를 기준으로 첫 섹션변경이 전 정거장 도착

2-1. 출발표시 없이 도착 - 도착인 경우 (section) = 섹션 바뀌었을 때를 기준으로  첫 섹션변경이 출발





![image-20210819154610137](C:\Users\cityo\Desktop\버스 도착시간과 출발시간 분류에 대한 고려.assets\image-20210819154610137.png)





- nextStTm 이상치 분석

![image-20210819154655011](C:\Users\cityo\Desktop\버스 도착시간과 출발시간 분류에 대한 고려.assets\image-20210819154655011-16293556160891.png)



- lastStTm 이상치 분석



![image-20210819154729855](C:\Users\cityo\Desktop\버스 도착시간과 출발시간 분류에 대한 고려.assets\image-20210819154729855.png)



버스 루트데이터 분석 및 시각화

- 세 가지 루트로 이루어져있고, 종점지 중에서 세곡동사거리 다음으로 진관차고지가 많다.



![image-20210819154840350](C:\Users\cityo\Desktop\버스 도착시간과 출발시간 분류에 대한 고려.assets\image-20210819154840350.png)



fullSectDist 값 분포확인

- 주로 500m 이하 값이 많고, 3000 이상 값은 많이 드물다.



![image-20210819155041119](C:\Users\cityo\Desktop\버스 도착시간과 출발시간 분류에 대한 고려.assets\image-20210819155041119.png)



![image-20210819155139725](C:\Users\cityo\Desktop\버스 도착시간과 출발시간 분류에 대한 고려.assets\image-20210819155139725.png)







Section 값 분석. 

- 섹션값은 start, stop 어느때나 바뀐다.

- 분석방법 재고찰 및 브레인 스토밍

  

![image-20210819155208542](C:\Users\cityo\Desktop\버스 도착시간과 출발시간 분류에 대한 고려.assets\image-20210819155208542.png)



![image-20210819155229486](C:\Users\cityo\Desktop\버스 도착시간과 출발시간 분류에 대한 고려.assets\image-20210819155229486.png)





![image-20210819155355366](C:\Users\cityo\Desktop\버스 도착시간과 출발시간 분류에 대한 고려.assets\image-20210819155355366.png)



![image-20210819155417722](C:\Users\cityo\Desktop\버스 도착시간과 출발시간 분류에 대한 고려.assets\image-20210819155417722-16293560582392.png)





nextStTm 값을 타깃값으로 설정하고,   나머지 피쳐들과 상관관계 분석



![image-20210819155500122](C:\Users\cityo\Desktop\버스 도착시간과 출발시간 분류에 대한 고려.assets\image-20210819155500122.png)







피쳐들간에 값, 단위차이를 줄이기 위해 Feature Scaling (MinMaxScaler)

![image-20210819155555556](C:\Users\cityo\Desktop\버스 도착시간과 출발시간 분류에 대한 고려.assets\image-20210819155555556.png)





![image-20210819155746865](C:\Users\cityo\Desktop\버스 도착시간과 출발시간 분류에 대한 고려.assets\image-20210819155746865.png)





예시 돌려본 랜덤포레스트 회귀로 분석한 결과, MAE 값이  9.16으로 값이 낮다.



팀원들과 회의결과 nextStTm을 어느 분 단위대로 일정하게 보내주었을 수도 있다는 의견참고.

-> 아래는 그 분석이다.





![image-20210819155644023](C:\Users\cityo\Desktop\버스 도착시간과 출발시간 분류에 대한 고려.assets\image-20210819155644023.png)





## 여기까지는, nextStTm을 target 값으로 예측함.







-------------------------------------------------------------------------



## 새롭게 정제된 데이터프레임을 사용해

## interval 값을 target 값으로 분석





![image-20210819160246546](C:\Users\cityo\Desktop\버스 도착시간과 출발시간 분류에 대한 고려.assets\image-20210819160246546.png)

1.

feature importance를 보니 위치값의 중요도가 높게 나옴.



->   gpsX, gpsY 값과 소요시간(interval) 간의 상관관계를 분석.



![image-20210819160153517](C:\Users\cityo\Desktop\버스 도착시간과 출발시간 분류에 대한 고려.assets\image-20210819160153517.png)





2. interval과 congestion의 값



![image-20210819160346382](C:\Users\cityo\Desktop\버스 도착시간과 출발시간 분류에 대한 고려.assets\image-20210819160346382.png)





![image-20210819160445930](C:\Users\cityo\Desktop\버스 도착시간과 출발시간 분류에 대한 고려.assets\image-20210819160445930-16293566870983.png)





![image-20210819160458437](C:\Users\cityo\Desktop\버스 도착시간과 출발시간 분류에 대한 고려.assets\image-20210819160458437.png)



**피처 회귀계수 시각화**



![image-20210819160510334](C:\Users\cityo\Desktop\버스 도착시간과 출발시간 분류에 대한 고려.assets\image-20210819160510334.png)



## onehotencoding

숫자형 카테고리 범주로 인해 오차가 더 생길것으로 추정하고 onehotencoding 작업



![image-20210819160533234](C:\Users\cityo\Desktop\버스 도착시간과 출발시간 분류에 대한 고려.assets\image-20210819160533234.png)

